@use 'util/base.scss';
@use 'util/mixins.scss';

.jt-listbox {
    --jt-listbox-padding: 0.2em;
    --jt-listbox-start-padding: 0.2em;
    --jt-listbox-group-indent: 1em;

    --_jt-listbox-padding: var(--jt-listbox-padding, 0.2em);
    --_jt-listbox-start-padding: var(--jt-listbox-start-padding, 0.2em);
    --_jt-listbox-group-indent: var(--jt-listbox-group-indent, 1em);

    margin: 0;
    padding: 0;
    list-style-type: none;
    overflow-block: auto;

    ul {
        margin: 0;
        padding: 0;
        list-style-type: none;
    }
}

.jt-listbox__item {
    position: relative;
    display: block;
    padding: var(--_jt-listbox-padding);
    padding-inline-start: var(--_jt-listbox-start-padding);
    cursor: default;

    &[aria-hidden="true"],
    &[hidden] {
        display: none;
    }

    &[aria-disabled="true"] {
        color: var(--_jt-control-disabled-color);
    }

    &[role="separator"] {
        height: 0;
        padding: 0;
        margin-block: var(--_jt-listbox-separator-margin);
        border-block-end: 1px solid var(--_jt-control-disabled-color);
        overflow-y: hidden;
    }

    &.jt-hover {
        background-color: var(--_jt-control-hover-background);
        color: var(--_jt-control-hover-color);
    }

    &.jt-focused {
        outline: var(--_jt-control-disabled-color) var(--_jt-focus-ring-style) var(--_jt-focus-ring-width);
        outline-offset: var(--_jt-focus-ring-offset);
    }

    .jt-focus &.jt-focused {
        outline: var(--_jt-focus-ring-color) var(--_jt-focus-ring-style) var(--_jt-focus-ring-width);
        outline-offset: var(--_jt-focus-ring-offset);
        background-color: var(--_jt-focus-background);
        color: var(--_jt-focus-color);
    }

    &[aria-selected="true"] {
        background-color: var(--_jt-control-accent-color);
        color: var(--_jt-control-background);
    }

    &[aria-checked="true"] {
        clip: rect(0 0 0 0); 
        clip-path: inset(50%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap; 
        width: 1px;
    }
}

.jt-listbox__group {
    .jt-listbox__item:not(.jt-listbox__item--header) {
        padding-inline-start: calc(var(--_jt-listbox-start-padding) + var(--jt-listbox-group-indent));
    }

    .jt-listbox__item--header {
        font-weight: bold;
    }
}